# 11장. 대규모 데이터 처리를 지탱하는 서버/인프라 입문

## **강의 29: 엔터프라이즈 vs. 웹 서비스**

### **엔터프라이즈와 웹 서비스의 응용범위 차이**

- 엔터프라이즈: 기업 내부 시스템 중심, 안정성과 일관성이 핵심
- 웹 서비스: 외부 사용자 대상, 대규모 트래픽과 급격한 부하 변화 대응이 핵심
- 두 분야는 유사해 보이지만 요구사항이 완전히 다르다.

### **웹 서비스의 특징 (엔터프라이즈와 비교)**

1. **트래픽**
    - 엔터프라이즈: 트래픽 변화 적음
    - 웹 서비스: 글로벌 사용자 때문에 순간 트래픽 급증 가능
2. **성장성**
    - 엔터프라이즈는 제한된 범위 내 성장
    - 웹 서비스는 비즈니스 특성상 급격한 성장 가능 (예: 100%, 200%, 300% 성장이 흔함)
3. **신뢰성**
    - 엔터프라이즈: 장애가 발생하면 금전적으로 매우 큰 손해 발생하기 때문에 높은 신뢰성 요구
    - 웹 서비스: 장애는 발생 가능. 지속적 복구 가능한 설계 중요
4. **트랜잭션**
    - 엔터프라이즈는 강한 트랜잭션 요구
    - 즉시 일관성이 없어도 괜찮은 경우가 많다. 데이터 정합성을 잃어도 ‘죄송합니다’ 정도로 끝나기도 한다.

<img width="692" height="239" alt="image" src="https://github.com/user-attachments/assets/b14e7685-d824-4078-9cb9-3596b7a3a456" />

### **웹 서비스의 인프라 - 중요 포인트 세 가지**

### **1. 서버 비용 효율화**

- 100% 신뢰성을 목표로 하면 비용 증가 문제
- 대신 장애를 일정 수준 감내하며 효율을 추구하는 구조 필요
- 핵심은 트레이드오프 이해

### **2. 확장성**

- UX/성능을 위해 서비스 동작을 빠르게 확장해야 한다.
- 100% 신뢰성보다 즉시 확장 가능한 구조가 중요
- 폭발적 성장에 대비한 구조가 필요

### **3. 개발 속도**

- 웹 서비스는 변화가 빠르므로 빠른 개발·배포가 중요.
- 배포를 가능한 간편하게, 필요한 배포 후 문제가 발생하면 곧바로 이전 상태로 돌아갈 수 있게 대처

## **강의 30: 클라우드 vs. 자체구축 인프라**

### **클라우드 컴퓨팅 개요**

- 2008년 이후 보편화된 개념
- 대표 서비스: Amazon EC2, Google App Engine, Microsoft Azure 등

### **클라우드의 장점**

- 확장성이 매우 뛰어남(필요 시 즉시 서버 증가 가능)
- Elastic Load Balancing 등 관리 서비스 제공
- 초기 비용이 적고 탄력적 운영 가능

### **클라우드의 단점**

- I/O 성능이 자체 구축 서버보다 낮을 수 있음
- 호스트 사양이 일정하지 않음

## **하테나에서의 클라우드 서비스 사용**

- 일부 시스템에서 Amazon Web Services 사용
- CDN, 미디어 전송을 위해 Amazon CloudFront 적용
- 그러나 핵심 DB는 자체구축 인프라 사용(성능 및 안정성 이유)
- 하테나 규모 기준에서는 EC2보다 자체구축이 더 효율적이라 판단

## **자체구축 인프라의 장점**

### **1. 유연한 서버 구성**

- 서비스 규모에 맞게 하드웨어 선택 가능
- 특정 I/O 성능이나 메모리 용량을 세밀하게 조정 가능

### **2. 서비스 특화 대응**

- 서비스 패턴에 최적화된 구조 설계 가능
- 메모리, CPU, 디스크 배치를 자유롭게 구성할 수 있음

### **3. 병목현상 제어**

- 전체 시스템의 병목 포인트를 직접 해결 가능
- SSD, RAID 구성 등 특정 성능에 초점을 맞출 수 있음

## **자체구축 인프라와 수직통합 모델**

- Google, Amazon 같은 회사는 모든 스택을 직접 구성한다.
- 하테나는 일부만 자체 구축 + 일부는 클라우드를 혼합해 사용하는 모델
- 수직통합은 고비용이지만 고성능·안정성 측면에서 장점 있음

## **하테나의 서비스 규모**

- 등록 사용자: 약 150만명
- 월간 UU: 약 190만
- 피크 트래픽: 약 850Mbps
- 서버 대수: 약 600대(가상 포함 시 약 1300대 수준)

## **하테나 북마크 시스템 구성도**

### **구성 요소**

- 리버스 프록시: 3대
- AP 서버: 11대
- DB 서버: 24대
- 캐시 서버(memcached): 총 5대
- 로드밸런서: 2대
- 검색 서버: 2대
- 분석 서버(Hadoop/worker): 여러 대
- 키워드 전용 DB: 6대

<img width="680" height="535" alt="image" src="https://github.com/user-attachments/assets/0feaaf30-d15d-413b-b357-2a8d3979c056" />

### **특징**

- AP와 DB 비율 1:2 정도로 구성
- 검색, 분석, 키워드 등 기능별로 독립된 인프라 구성
- 사용량에 따라 서버를 분리하여 안정성과 확장성 확보

## **11장 요약**

- 엔터프라이즈와 웹 서비스는 요구사항과 설계 철학이 근본적으로 다르다.
- 웹 서비스는 비용 효율화, 확장성, 빠른 개발이 핵심
- 클라우드와 자체구축은 각각 장단점이 있으며 규모와 목적에 따라 선택해야 한다.
- 하테나는 핵심 DB·검색은 자체 구축, 일부는 AWS 사용
- 하테나는 약 600대 이상의 서버를 운영하며 기능별로 전문화된 인프라 구성을 갖추고 있다.

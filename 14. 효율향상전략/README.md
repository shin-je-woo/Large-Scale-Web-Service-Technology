# 14장. 효율향상전략

**하드웨어의 리소스 사용률 높이기**

## **강의 36: 가상화 기술**

### 가상화 기술의 도입 목적

- **확장성**: 서버 수 대비 리소스 낭비를 줄이고 효율 극대화
- **비용대비 성능 향상**: 물리 서버 대비 더 높은 활용률
- **고가용성**: 장애를 한 서버에 고립시키고 운영 안정성 증가
- **운영 단순화**: 서버 구성/배치 변경이 용이

### 가상화 기술의 효용

### (1) 하이퍼바이저 기반 관리

- IPMI 대신 하이퍼바이저(Dom0)에서 서버 통합 관리
- 물리 서버의 상태 확인, 전원 관리 등을 소프트웨어적으로 수행 가능

### (2) 하드웨어 차이 흡수

- 서로 다른 물리 장비도 동일한 방식으로 게스트 OS 운용 가능
- 장비 교체 시 서비스 이전을 훨씬 쉽게 처리

### (3) 준가상화(Para-Virtualization)

- 게스트 OS가 하이퍼바이저의 존재를 인지
- → 성능 손실을 최소화하며 가상화 구현 가능

### (4) 리소스 소비 제어

- CPU/메모리 과부하 감지
- 특정 게스트 OS에 리소스를 동적 재분배

### 가상화 서버 구축 정책

### 기본 전략: 하드웨어 이용효율 향상

- **남는 리소스를 게스트 OS로 배분하는 것**
    - CPU 여유 → 웹 서버 게스트
    - I/O 여유 → DB 서버 게스트
    - 메모리 여유 → 캐시 서버

### 가상화 서버 구축 예시

<img width="701" height="314" alt="image" src="https://github.com/user-attachments/assets/9ef86a16-96c3-4658-b03b-9cb1fd3d673e" />

- 물리 리소스: 메모리 4GB
- Dom0(관리 OS): 0.5GB 사용
- 웹 서버 게스트 OS: 3.5GB 사용
- 웹 서버는 CPU 중심 부하 → CPU를 집중 제공하는 형태
- 호스트OS의 메모리 4GB → 8GB 증설 → 게스트OS의 웹서버 메모리를 5.5GB로 확장하고, 캐시 서버를 새로 구축한다.

<img width="684" height="313" alt="image" src="https://github.com/user-attachments/assets/23b49119-55c1-42cf-b16a-418e191073d7" />

- 물리 리소스: 메모리 4GB
- Dom0: 0.5GB 사용
- DB 서버 게스트 OS: 3.5GB 사용
- DB 서버는 디스크 I/O 중심 부하 → I/O 대역폭을 우선 제공하는 구조
- DB 서버는 보통 CPU 리소스는 그다지 소비하지 않는 경우가 많으므로 웹서버를 구축해서 I/O와 CPU 리소스를 모두 사용할 수 있도록 한다.

### 가상화로 얻는 장점

- 물리 리소스 제어가 쉬워져 운영 효율 증가
- VM 단위로 이관/증설이 쉬워 **장애 복구 속도 증가**
- 비정상 동작 시 문제를 국소화시키고 호스트를 쉽게 제어할 수 있다.
- 서버 추가 없이도 자원 재배치로 성능 확보 가능

### 가상화 도입 시 주의점

- CPU 성능 감소 **2~3%**
- 메모리 성능 감소 **약 10%**
- 네트워크 성능 약간 저하
- I/O 성능 감소 **최대 5%**

> 결론: 큰 문제는 아닌 수준이며 대부분 운영에서 허용 범위
> 

## **강의 37: 하드웨어와 효율향상**

### 프로세서 성능 향상

- 무어의 법칙: 직접회로 상의 트랜지스터 수는 18개월마다 2배로 증가한다.
- 다중 코어 기반 서버가 보급되면서 병렬 처리 성능 급상승

### 메모리·HDD의 비용저하

- 메모리 가격 급락: 2GB → 3만 엔 → 현재는 수천 엔 수준 (2010년 집필 시점 기준)
- HDD도 지속적으로 저렴해짐
- 대용량 메모리·스토리지 도입이 현저히 쉬워짐

### 저가 하드웨어의 유용한 이용법

- **Diskless 서버 채택** → OS를 네트워크 부팅
- **RAID-10 / RAID-0 활용** → I/O 성능 확보
- **IPMI 대신 Intel AMT**로 관리 비용 절감
- **대용량 메모리 + 다중 코어 CPU** 기반 저렴한 서버 추천

### SSD 활용

- HDD 대비 I/O 개선 효과 압도적
- CPU 부하와 Load Average가 안정적으로 유지됨
- 고사양 메모리 + HDD보다 비용대비 효과 좋음

## 14장. 효율향상전략 요약

- 가상화는 리소스 활용 극대화 + 비용 절감 + 고가용성 확보
- Dom0 기반 중앙 관리로 운영 효율 증가
- 웹/DB/캐시 서버 배치를 리소스 여유에 따라 최적화
- SSD 도입으로 I/O 병목 해소 → DB 성능/안정성 대폭 증가
- 저가 하드웨어 기반 서버 + 가상화 조합은 실무에서 매우 효율적

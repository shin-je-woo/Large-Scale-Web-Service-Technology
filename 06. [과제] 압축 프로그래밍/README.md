# 6장. [과제] 압축 프로그래밍

**데이터 크기, I/O 고속화와의 관계 인식하기**

## **강의 16: 정수 데이터를 컴팩트하게 가져가기**

### 압축이 중요한 이유

- 대규모 데이터 처리에서 가장 큰 병목은 CPU가 아니라 **디스크 I/O**이다.
- 데이터가 작아지면 읽기·쓰기 속도가 즉시 빨라지고, 캐시에 더 많이 담을 수 있어 전체 처리 속도가 개선된다.
- 따라서 “어떻게 데이터를 작게 만들 것인가?”가 실질적인 성능 향상 포인트가 된다.

### 정수 데이터의 구조적 특징

- 로그, 검색 인덱스, 태그 데이터 등에서는 정수열이 정렬되어 있고 증가하는 경우가 많다.
- 이런 데이터 구조는 **그 자체로 이미 압축 기회**를 제공한다.

### Gap 아이디어

- 정수값을 그대로 저장하지 않고, **이전 값과의 차이(차분)** 를 저장하면 훨씬 작은 수가 된다.
- 작은 값은 바이트 수가 줄어들기 때문에 압축 효율을 극단적으로 높일 수 있다.
- 이 과정은 특별한 알고리즘이 아니라 **데이터 구조를 관찰해 센스 있게 표현을 바꾸는 것**이다.

## **강의 17: VB Code와 속도감각**

### VB Code란 무엇인가

- 정수를 저장할 때 고정된 4바이트(32비트)를 쓰지 않고, **필요한 만큼만 바이트를 사용하는 방식**이다.
- 1바이트 중 최상위 비트로 다음 바이트가 이어지는지를 나타내고, 나머지 7비트를 실제 값의 일부로 사용한다.
- 값이 작으면 1바이트, 어느 정도 크면 2바이트… 이런 식으로 동작한다.

### 왜 빠른가

- 알골적으로는 매우 단순하다.
- 불필요한 오버헤드가 없고, 정수 분해·조합이 단순하기 때문에 CPU 캐시에 잘 맞는다.
- Gap과 조합되면 대부분의 값이 작은 정수가 되어 **압축률과 속도** 모두 좋아진다.

### 핵심 포인트

- 데이터는 고정 폭으로 저장할 필요가 없다.
- 데이터의 크기는 실제 값의 범위에 따라 달라질 수 있으며, 그걸 활용하는 것이 압축의 감각이다.
- 정렬된 정수열 → Gap → VB Code는 검색 엔진 등 실제 산업에서 자주 쓰이는 조합이다.

## **강의 18: 실제 구현과 사고 방식**

### 코드는 중요하지만, 더 중요한 건 어떻게 바라보는가

- 이 과제는 Perl로 VB Code를 구현하는 내용이지만 저자가 하고 싶은 말은 압축 알고리즘을 구현할 수 있는 사고 방식이다.
- 즉, **데이터를 읽고 → 구조를 파악하고 → 더 적절한 표현을 스스로 찾아내는 과정 자체가 핵심**이다.

### 구현에서 중요한 부분

- Gap을 적용하며 정렬된 정수열을 효율적으로 분절한다.
- VB Code 인코드/디코드를 구현해 실제 바이트열을 다뤄본다.
- pack/unpack을 사용해 바이너리 레벨 데이터를 직접 다루면 데이터 크기 감각이 생긴다.

### 이 강의가 전달하려는 메시지

- 압축은 단순히 공간을 줄이는 기술이 아니라 **I/O를 줄여 전체 처리량을 올리는 핵심 기술**이다.
- Gap과 VB Code는 매우 단순하지만, 실전에서 뛰어난 성능을 보인다.
- 중요한 것은 데이터에 맞춰 표현을 선택하는 능력이다. 이것이 압축의 본질이며, 대규모 데이터 처리의 감각이다.
